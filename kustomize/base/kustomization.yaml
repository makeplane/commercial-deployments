apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: plane

commonLabels:
  app.kubernetes.io/part-of: plane-enterprise

resources:
  # Namespace and RBAC
  - service-account.yaml

  # ConfigMaps and Secrets
  - configs/app-configmap.yaml
  - configs/app-secret.yaml
  - configs/live-configmap.yaml
  - configs/live-secret.yaml
  - configs/doc-store-secret.yaml
  - configs/opensearch-secret.yaml
  - configs/monitor-configmap.yaml
  - configs/outbox-poller-configmap.yaml
  - configs/automation-consumer-configmap.yaml
  - configs/silo-configmap.yaml
  - configs/silo-secret.yaml

  # StatefulSets (Required)
  - statefulsets/monitor.yaml

  # Deployments (Core Apps + Required Services)
  - deployments/api.yaml
  - deployments/web.yaml
  - deployments/space.yaml
  - deployments/admin.yaml
  - deployments/live.yaml
  - deployments/worker.yaml
  - deployments/beat-worker.yaml
  - deployments/iframely.yaml
  - deployments/outbox-poller.yaml
  - deployments/automation-consumer.yaml
  - deployments/silo.yaml

  # Services
  - services/api.yaml
  - services/web.yaml
  - services/space.yaml
  - services/admin.yaml
  - services/live.yaml
  - services/monitor.yaml
  - services/iframely.yaml
  - services/silo.yaml

  # Jobs
  - jobs/migrator.yaml

  # Ingress
  - ingress.yaml

# Default image tags
images:
  - name: makeplane/backend-commercial
    newTag: v2.3.4
  - name: makeplane/web-commercial
    newTag: v2.3.4
  - name: makeplane/space-commercial
    newTag: v2.3.4
  - name: makeplane/admin-commercial
    newTag: v2.3.4
  - name: makeplane/live-commercial
    newTag: v2.3.4
  - name: makeplane/monitor-commercial
    newTag: v2.3.4
  - name: makeplane/iframely
    newTag: v1.2.0
  - name: makeplane/silo-commercial
    newTag: v2.3.4
